<application>
  <component name="VimSettings">
    <state version="4" enabled="true" />
    <globalmarks />
    <filemarks>
      <file name="$USER_HOME$/GitHubProjects/WeChatLuckyMoney/app/src/main/java/xyz/monkeytong/hongbao/activities/MainActivity.java" timestamp="1460363075912">
        <mark key="[" line="29" column="43" />
        <mark key="]" line="29" column="43" />
        <mark key="." line="29" column="43" />
      </file>
      <file name="$USER_HOME$/GitHubProjects/WeChatLuckyMoney/gradle/wrapper/gradle-wrapper.properties" timestamp="1460364369867">
        <mark key="[" line="5" column="68" />
        <mark key="]" line="5" column="68" />
        <mark key="^" line="5" column="68" />
        <mark key="." line="5" column="68" />
      </file>
      <file name="$USER_HOME$/LuckyMoney/app/src/main/java/qwivan/github/com/luckymoney/MainActivity.java" timestamp="1460349332031">
        <mark key="'" line="12" column="4" />
        <mark key="[" line="12" column="5" />
        <mark key="]" line="12" column="15" />
        <mark key="." line="12" column="15" />
        <mark key="^" line="12" column="15" />
      </file>
      <file name="/Dummy.txt" timestamp="1460363803959">
        <mark key="[" line="0" column="0" />
      </file>
      <file name="$USER_HOME$/LuckyMoney/app/src/main/res/xml/accessible_service_config.xml" timestamp="1460362451579">
        <mark key="[" line="3" column="33" />
        <mark key="]" line="3" column="40" />
        <mark key="." line="3" column="40" />
        <mark key="^" line="3" column="40" />
      </file>
      <file name="/a.dummy" timestamp="1460363803986">
        <mark key="[" line="0" column="0" />
      </file>
      <file name="$USER_HOME$/GitHubProjects/WeChatLuckyMoney/app/build.gradle" timestamp="1460364057996">
        <mark key="'" line="35" column="0" />
      </file>
      <file name="$USER_HOME$/GitHubProjects/WeChatLuckyMoney/build.gradle" timestamp="1460364501706">
        <mark key="[" line="7" column="50" />
        <mark key="]" line="7" column="61" />
        <mark key="." line="7" column="61" />
        <mark key="^" line="7" column="61" />
      </file>
      <file name="$USER_HOME$/LuckyMoney/app/src/main/java/qwivan/github/com/luckymoney/Qiang.java" timestamp="1460363499050">
        <mark key="'" line="0" column="0" />
        <mark key="[" line="0" column="0" />
        <mark key="]" line="22" column="0" />
        <mark key="^" line="20" column="4" />
        <mark key="." line="20" column="4" />
      </file>
      <file name="$USER_HOME$/GitHubProjects/WeChatLuckyMoney/app/src/main/AndroidManifest.xml" timestamp="1460363485489">
        <mark key="'" line="34" column="46" />
        <mark key="[" line="39" column="0" />
        <mark key="]" line="40" column="74" />
      </file>
      <file name="$USER_HOME$/LuckyMoney/app/src/main/AndroidManifest.xml" timestamp="1460363491328">
        <mark key="'" line="19" column="30" />
        <mark key="[" line="24" column="0" />
        <mark key="]" line="24" column="67" />
        <mark key="." line="24" column="73" />
      </file>
      <file name="/fragment.java" timestamp="1460363236535">
        <mark key="[" line="0" column="0" />
      </file>
      <file name="$USER_HOME$/GitHubProjects/WeChatLuckyMoney/app/src/main/res/xml/accessible_service_config.xml" timestamp="1460362194491">
        <mark key="'" line="0" column="0" />
        <mark key="[" line="0" column="0" />
        <mark key="]" line="10" column="44" />
      </file>
    </filemarks>
    <jumps>
      <jump line="43" column="13" filename="$USER_HOME$/GitHubProjects/WeChatLuckyMoney/app/src/main/java/xyz/monkeytong/hongbao/activities/MainActivity.java" />
      <jump line="61" column="17" filename="$USER_HOME$/GitHubProjects/WeChatLuckyMoney/app/src/main/java/xyz/monkeytong/hongbao/activities/MainActivity.java" />
      <jump line="45" column="13" filename="$USER_HOME$/GitHubProjects/WeChatLuckyMoney/app/src/main/java/xyz/monkeytong/hongbao/activities/MainActivity.java" />
      <jump line="54" column="56" filename="$USER_HOME$/GitHubProjects/WeChatLuckyMoney/app/src/main/java/xyz/monkeytong/hongbao/activities/MainActivity.java" />
      <jump line="49" column="29" filename="$USER_HOME$/GitHubProjects/WeChatLuckyMoney/app/src/main/java/xyz/monkeytong/hongbao/activities/MainActivity.java" />
      <jump line="145" column="20" filename="$USER_HOME$/GitHubProjects/WeChatLuckyMoney/app/src/main/java/xyz/monkeytong/hongbao/activities/MainActivity.java" />
      <jump line="126" column="8" filename="$USER_HOME$/GitHubProjects/WeChatLuckyMoney/app/src/main/java/xyz/monkeytong/hongbao/activities/MainActivity.java" />
      <jump line="135" column="8" filename="$USER_HOME$/GitHubProjects/WeChatLuckyMoney/app/src/main/java/xyz/monkeytong/hongbao/activities/MainActivity.java" />
      <jump line="133" column="12" filename="$USER_HOME$/GitHubProjects/WeChatLuckyMoney/app/src/main/java/xyz/monkeytong/hongbao/activities/MainActivity.java" />
      <jump line="116" column="16" filename="$USER_HOME$/GitHubProjects/WeChatLuckyMoney/app/src/main/java/xyz/monkeytong/hongbao/activities/MainActivity.java" />
      <jump line="109" column="16" filename="$USER_HOME$/GitHubProjects/WeChatLuckyMoney/app/src/main/java/xyz/monkeytong/hongbao/activities/MainActivity.java" />
      <jump line="0" column="0" filename="$USER_HOME$/GitHubProjects/WeChatLuckyMoney/app/src/main/AndroidManifest.xml" />
      <jump line="1" column="0" filename="$USER_HOME$/GitHubProjects/WeChatLuckyMoney/app/src/main/AndroidManifest.xml" />
      <jump line="39" column="47" filename="$USER_HOME$/GitHubProjects/WeChatLuckyMoney/app/src/main/AndroidManifest.xml" />
      <jump line="12" column="4" filename="$USER_HOME$/LuckyMoney/app/src/main/java/qwivan/github/com/luckymoney/MainActivity.java" />
      <jump line="170" column="5" filename="$USER_HOME$/GitHubProjects/WeChatLuckyMoney/app/src/main/java/xyz/monkeytong/hongbao/services/HongbaoService.java" />
      <jump line="115" column="0" filename="$USER_HOME$/GitHubProjects/WeChatLuckyMoney/app/src/main/java/xyz/monkeytong/hongbao/services/HongbaoService.java" />
      <jump line="59" column="17" filename="$USER_HOME$/GitHubProjects/WeChatLuckyMoney/app/src/main/java/xyz/monkeytong/hongbao/services/HongbaoService.java" />
      <jump line="41" column="20" filename="$USER_HOME$/GitHubProjects/WeChatLuckyMoney/app/src/main/java/xyz/monkeytong/hongbao/services/HongbaoService.java" />
      <jump line="56" column="17" filename="$USER_HOME$/GitHubProjects/WeChatLuckyMoney/app/src/main/java/xyz/monkeytong/hongbao/services/HongbaoService.java" />
      <jump line="14" column="41" filename="$USER_HOME$/LuckyMoney/app/src/main/java/qwivan/github/com/luckymoney/Qiang.java" />
      <jump line="60" column="82" filename="$USER_HOME$/GitHubProjects/WeChatLuckyMoney/app/src/main/java/xyz/monkeytong/hongbao/services/HongbaoService.java" />
      <jump line="149" column="12" filename="$USER_HOME$/GitHubProjects/WeChatLuckyMoney/app/src/main/java/xyz/monkeytong/hongbao/services/HongbaoService.java" />
      <jump line="40" column="56" filename="$USER_HOME$/GitHubProjects/WeChatLuckyMoney/app/src/main/AndroidManifest.xml" />
      <jump line="0" column="0" filename="$USER_HOME$/GitHubProjects/WeChatLuckyMoney/app/src/main/res/xml/accessible_service_config.xml" />
      <jump line="0" column="0" filename="$USER_HOME$/LuckyMoney/app/src/main/res/xml/accessible_service_config.xml" />
      <jump line="13" column="4" filename="$USER_HOME$/LuckyMoney/app/src/main/java/qwivan/github/com/luckymoney/Qiang.java" />
      <jump line="16" column="46" filename="$USER_HOME$/GitHubProjects/WeChatLuckyMoney/app/src/main/AndroidManifest.xml" />
      <jump line="50" column="0" filename="$USER_HOME$/GitHubProjects/WeChatLuckyMoney/app/src/main/java/xyz/monkeytong/hongbao/activities/MainActivity.java" />
      <jump line="331" column="20" filename="$USER_HOME$/GitHubProjects/WeChatLuckyMoney/app/src/main/java/xyz/monkeytong/hongbao/services/HongbaoService.java" />
      <jump line="202" column="17" filename="$USER_HOME$/GitHubProjects/WeChatLuckyMoney/app/src/main/java/xyz/monkeytong/hongbao/services/HongbaoService.java" />
      <jump line="68" column="17" filename="$USER_HOME$/GitHubProjects/WeChatLuckyMoney/app/src/main/java/xyz/monkeytong/hongbao/services/HongbaoService.java" />
      <jump line="34" column="46" filename="$USER_HOME$/GitHubProjects/WeChatLuckyMoney/app/src/main/AndroidManifest.xml" />
      <jump line="19" column="30" filename="$USER_HOME$/LuckyMoney/app/src/main/AndroidManifest.xml" />
      <jump line="8" column="13" filename="$USER_HOME$/LuckyMoney/app/src/main/java/qwivan/github/com/luckymoney/Qiang.java" />
      <jump line="0" column="0" filename="$USER_HOME$/LuckyMoney/app/src/main/java/qwivan/github/com/luckymoney/Qiang.java" />
      <jump line="24" column="17" filename="$USER_HOME$/GitHubProjects/WeChatLuckyMoney/app/src/main/java/xyz/monkeytong/hongbao/services/HongbaoService.java" />
      <jump line="0" column="0" filename="$USER_HOME$/GitHubProjects/WeChatLuckyMoney/app/src/main/java/xyz/monkeytong/hongbao/services/HongbaoService.java" />
      <jump line="190" column="43" filename="$USER_HOME$/GitHubProjects/WeChatLuckyMoney/app/src/main/java/xyz/monkeytong/hongbao/services/HongbaoService.java" />
      <jump line="200" column="28" filename="$USER_HOME$/GitHubProjects/WeChatLuckyMoney/app/src/main/java/xyz/monkeytong/hongbao/services/HongbaoService.java" />
      <jump line="176" column="34" filename="$USER_HOME$/GitHubProjects/WeChatLuckyMoney/app/src/main/java/xyz/monkeytong/hongbao/services/HongbaoService.java" />
      <jump line="35" column="0" filename="$USER_HOME$/GitHubProjects/WeChatLuckyMoney/app/build.gradle" />
    </jumps>
    <registers>
      <register name="&quot;" type="4">
        <text>1.2.3</text>
      </register>
      <register name="-" type="4">
        <text>1.2.3</text>
      </register>
      <register name="0" type="2">
        <text encoding="base64">ICAgICAgICBpZiAoc2hhcmVkUHJlZmVyZW5jZXMgPT0gbnVsbCkgcmV0dXJuOwoKICAgICAgICBzZXRDdXJyZW50QWN0aXZpdHlOYW1lKGV2ZW50KTsKCiAgICAgICAgLyog5qOA5rWL6YCa55+l5raI5oGvICovCiAgICAgICAgaWYgKCFtTXV0ZXgpIHsKICAgICAgICAgICAgaWYgKHNoYXJlZFByZWZlcmVuY2VzLmdldEJvb2xlYW4oInByZWZfd2F0Y2hfbm90aWZpY2F0aW9uIiwgZmFsc2UpICYmIHdhdGNoTm90aWZpY2F0aW9ucyhldmVudCkpIHJldHVybjsKICAgICAgICAgICAgaWYgKHNoYXJlZFByZWZlcmVuY2VzLmdldEJvb2xlYW4oInByZWZfd2F0Y2hfbGlzdCIsIGZhbHNlKSAmJiB3YXRjaExpc3QoZXZlbnQpKSByZXR1cm47CiAgICAgICAgICAgIG1MaXN0TXV0ZXggPSBmYWxzZTsKICAgICAgICB9CgogICAgICAgIGlmIChzaGFyZWRQcmVmZXJlbmNlcy5nZXRCb29sZWFuKCJwcmVmX3dhdGNoX2NoYXQiLCBmYWxzZSkpIHdhdGNoQ2hhdChldmVudCk7Cg==</text>
      </register>
      <register name="1" type="4">
        <text>1.2.3</text>
      </register>
      <register name="2" type="4">
        <text>1.2.3</text>
      </register>
      <register name="3" type="4">
        <text>1.2.3</text>
      </register>
      <register name="4" type="2">
        <text encoding="base64">ICAgIHByaXZhdGUgU3RyaW5nIGdlbmVyYXRlQ29tbWVudFN0cmluZygpIHsKICAgICAgICBpZiAoIXNpZ25hdHVyZS5vdGhlcnMpIHJldHVybiBudWxsOwoKICAgICAgICBCb29sZWFuIG5lZWRDb21tZW50ID0gc2hhcmVkUHJlZmVyZW5jZXMuZ2V0Qm9vbGVhbigicHJlZl9jb21tZW50X3N3aXRjaCIsIGZhbHNlKTsKICAgICAgICBpZiAoIW5lZWRDb21tZW50KSByZXR1cm4gbnVsbDsKCiAgICAgICAgU3RyaW5nW10gd29yZHNBcnJheSA9IHNoYXJlZFByZWZlcmVuY2VzLmdldFN0cmluZygicHJlZl9jb21tZW50X3dvcmRzIiwgIiIpLnNwbGl0KCIgKyIpOwogICAgICAgIGlmICh3b3Jkc0FycmF5Lmxlbmd0aCA9PSAwKSByZXR1cm4gbnVsbDsKCiAgICAgICAgQm9vbGVhbiBhdFNlbmRlciA9IHNoYXJlZFByZWZlcmVuY2VzLmdldEJvb2xlYW4oInByZWZfY29tbWVudF9hdCIsIGZhbHNlKTsKICAgICAgICBpZiAoYXRTZW5kZXIpIHsKICAgICAgICAgICAgcmV0dXJuICJAIiArIHNpZ25hdHVyZS5zZW5kZXIgKyAiICIgKyB3b3Jkc0FycmF5WyhpbnQpIChNYXRoLnJhbmRvbSgpICogd29yZHNBcnJheS5sZW5ndGgpXTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXR1cm4gd29yZHNBcnJheVsoaW50KSAoTWF0aC5yYW5kb20oKSAqIHdvcmRzQXJyYXkubGVuZ3RoKV07CiAgICAgICAgfQogICAgfQo=</text>
      </register>
      <register name="5" type="2">
        <text encoding="base64">ICAgIC8qKgogICAgICog57qi5YyFIOmSrgogICAgICovCiAgICBwcml2YXRlIEFjY2Vzc2liaWxpdHlOb2RlSW5mbyBmaW5kT3BlbkJ1dHRvbihBY2Nlc3NpYmlsaXR5Tm9kZUluZm8gbm9kZSkgewogICAgICAgIGlmIChub2RlID09IG51bGwpCiAgICAgICAgICAgIHJldHVybiBudWxsOwoKICAgICAgICAvL+mdnmxheW91dOWFg+e0oAogICAgICAgIGlmIChub2RlLmdldENoaWxkQ291bnQoKSA9PSAwKSB7CiAgICAgICAgICAgIGlmICgiYW5kcm9pZC53aWRnZXQuQnV0dG9uIi5lcXVhbHMobm9kZS5nZXRDbGFzc05hbWUoKSkpCiAgICAgICAgICAgICAgICByZXR1cm4gbm9kZTsKICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgfQoKICAgICAgICAvL2xheW91dOWFg+e0oO+8jOmBjeWOhuaJvmJ1dHRvbgogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbm9kZS5nZXRDaGlsZENvdW50KCk7IGkrKykgewogICAgICAgICAgICBBY2Nlc3NpYmlsaXR5Tm9kZUluZm8gYnV0dG9uID0gZmluZE9wZW5CdXR0b24obm9kZS5nZXRDaGlsZChpKSk7CiAgICAgICAgICAgIGlmIChidXR0b24gIT0gbnVsbCkKICAgICAgICAgICAgICAgIHJldHVybiBidXR0b247CiAgICAgICAgfQogICAgICAgIHJldHVybiBudWxsOwogICAgfQoKICAgIC8qKgogICAgICog6IqCIOS/oQogICAgICovCi8vICAgIHByaXZhdGUgdm9pZCBjaGVja05vZGVJbmZvKGludCBldmVudFR5cGUpIHsKLy8gICAgICAgIGlmICh0aGlzLnJvb3ROb2RlSW5mbyA9PSBudWxsKSByZXR1cm47Ci8vCi8vICAgICAgICBpZiAoc2lnbmF0dXJlLmNvbW1lbnRTdHJpbmcgIT0gbnVsbCkgewovLyAgICAgICAgICAgIHNlbmRDb21tZW50KCk7Ci8vICAgICAgICAgICAgc2lnbmF0dXJlLmNvbW1lbnRTdHJpbmcgPSBudWxsOwovLyAgICAgICAgfQovLwovLyAgICAgICAgLyog6IGK5aSp5Lya6K+d56qX5Y+j77yM6YGN5Y6G6IqC54K55Yy56YWN4oCc6aKG5Y+W57qi5YyF4oCd5ZKMIuafpeeci+e6ouWMhSIgKi8KLy8gICAgICAgIEFjY2Vzc2liaWxpdHlOb2RlSW5mbyBub2RlMSA9IChzaGFyZWRQcmVmZXJlbmNlcy5nZXRCb29sZWFuKCJwcmVmX3dhdGNoX3NlbGYiLCBmYWxzZSkpID8KLy8gICAgICAgICAgICAgICAgdGhpcy5nZXRUaGVMYXN0Tm9kZShXRUNIQVRfVklFV19PVEhFUlNfQ0gsIFdFQ0hBVF9WSUVXX1NFTEZfQ0gpIDogdGhpcy5nZXRUaGVMYXN0Tm9kZShXRUNIQVRfVklFV19PVEhFUlNfQ0gpOwovLyAgICAgICAgaWYgKG5vZGUxICE9IG51bGwgJiYgY3VycmVudEFjdGl2aXR5TmFtZS5jb250YWlucyhXRUNIQVRfTFVDS01PTkVZX0dFTkVSQUxfQUNUSVZJVFkpKSB7Ci8vICAgICAgICAgICAgU3RyaW5nIGV4Y2x1ZGVXb3JkcyA9IHNoYXJlZFByZWZlcmVuY2VzLmdldFN0cmluZygicHJlZl93YXRjaF9leGNsdWRlX3dvcmRzIiwgIiIpOwovLyAgICAgICAgICAgIGlmICh0aGlzLnNpZ25hdHVyZS5nZW5lcmF0ZVNpZ25hdHVyZShub2RlMSwgZXhjbHVkZVdvcmRzKSkgewovLyAgICAgICAgICAgICAgICBtTHVja3lNb25leVJlY2VpdmVkID0gdHJ1ZTsKLy8gICAgICAgICAgICAgICAgbVJlY2VpdmVOb2RlID0gbm9kZTE7Ci8vICAgICAgICAgICAgICAgIExvZy5kKCJzaWciLCB0aGlzLnNpZ25hdHVyZS50b1N0cmluZygpKTsKLy8gICAgICAgICAgICB9Ci8vICAgICAgICAgICAgcmV0dXJuOwovLyAgICAgICAgfQovLwovLyAgICAgICAgLyog5oiz5byA57qi5YyF77yM57qi5YyF6L+Y5rKh5oqi5a6M77yM6YGN5Y6G6IqC54K55Yy56YWN4oCc5ouG57qi5YyF4oCdICovCi8vICAgICAgICBBY2Nlc3NpYmlsaXR5Tm9kZUluZm8gbm9kZTIgPSBmaW5kT3BlbkJ1dHRvbih0aGlzLnJvb3ROb2RlSW5mbyk7Ci8vICAgICAgICBpZiAobm9kZTIgIT0gbnVsbCAmJiAiYW5kcm9pZC53aWRnZXQuQnV0dG9uIi5lcXVhbHMobm9kZTIuZ2V0Q2xhc3NOYW1lKCkpICYmIGN1cnJlbnRBY3Rpdml0eU5hbWUuY29udGFpbnMoV0VDSEFUX0xVQ0tNT05FWV9SRUNFSVZFX0FDVElWSVRZKSkgewovLyAgICAgICAgICAgIG1VbnBhY2tOb2RlID0gbm9kZTI7Ci8vICAgICAgICAgICAgbVVucGFja0NvdW50ICs9IDE7Ci8vICAgICAgICAgICAgcmV0dXJuOwovLyAgICAgICAgfQovLwovLyAgICAgICAgLyog5oiz5byA57qi5YyF77yM57qi5YyF5bey6KKr5oqi5a6M77yM6YGN5Y6G6IqC54K55Yy56YWN4oCc57qi5YyF6K+m5oOF4oCd5ZKM4oCc5omL5oWi5LqG4oCdICovCi8vICAgICAgICBib29sZWFuIGhhc05vZGVzID0gdGhpcy5oYXNPbmVPZlRob3NlTm9kZXMoCi8vICAgICAgICAgICAgICAgIFdFQ0hBVF9CRVRURVJfTFVDS19DSCwgV0VDSEFUX0RFVEFJTFNfQ0gsCi8vICAgICAgICAgICAgICAgIFdFQ0hBVF9CRVRURVJfTFVDS19FTiwgV0VDSEFUX0RFVEFJTFNfRU4sIFdFQ0hBVF9FWFBJUkVTX0NIKTsKLy8gICAgICAgIGlmIChtTXV0ZXggJiYgZXZlbnRUeXBlID09IEFjY2Vzc2liaWxpdHlFdmVudC5UWVBFX1dJTkRPV19TVEFURV9DSEFOR0VEICYmIGhhc05vZGVzCi8vICAgICAgICAgICAgICAgICYmIChjdXJyZW50QWN0aXZpdHlOYW1lLmNvbnRhaW5zKFdFQ0hBVF9MVUNLTU9ORVlfREVUQUlMX0FDVElWSVRZKQovLyAgICAgICAgICAgICAgICB8fCBjdXJyZW50QWN0aXZpdHlOYW1lLmNvbnRhaW5zKFdFQ0hBVF9MVUNLTU9ORVlfUkVDRUlWRV9BQ1RJVklUWSkpKSB7Ci8vICAgICAgICAgICAgbU11dGV4ID0gZmFsc2U7Ci8vICAgICAgICAgICAgbUx1Y2t5TW9uZXlQaWNrZWQgPSBmYWxzZTsKLy8gICAgICAgICAgICBtVW5wYWNrQ291bnQgPSAwOwovLyAgICAgICAgICAgIHBlcmZvcm1HbG9iYWxBY3Rpb24oR0xPQkFMX0FDVElPTl9CQUNLKTsKLy8gICAgICAgICAgICBzaWduYXR1cmUuY29tbWVudFN0cmluZyA9IGdlbmVyYXRlQ29tbWVudFN0cmluZygpOwovLyAgICAgICAgfQovLyAgICB9CgogICAgcHJpdmF0ZSB2b2lkIHNlbmRDb21tZW50KCkgewogICAgICAgIHRyeSB7CiAgICAgICAgICAgIEFjY2Vzc2liaWxpdHlOb2RlSW5mbyBvdXROb2RlID0KICAgICAgICAgICAgICAgICAgICBnZXRSb290SW5BY3RpdmVXaW5kb3coKS5nZXRDaGlsZCgwKS5nZXRDaGlsZCgwKTsKICAgICAgICAgICAgQWNjZXNzaWJpbGl0eU5vZGVJbmZvIG5vZGVUb0lucHV0ID0gb3V0Tm9kZS5nZXRDaGlsZChvdXROb2RlLmdldENoaWxkQ291bnQoKSAtIDEpLmdldENoaWxkKDApLmdldENoaWxkKDEpOwoKICAgICAgICAgICAgaWYgKCJhbmRyb2lkLndpZGdldC5FZGl0VGV4dCIuZXF1YWxzKG5vZGVUb0lucHV0LmdldENsYXNzTmFtZSgpKSkgewogICAgICAgICAgICAgICAgQnVuZGxlIGFyZ3VtZW50cyA9IG5ldyBCdW5kbGUoKTsKICAgICAgICAgICAgICAgIGFyZ3VtZW50cy5wdXRDaGFyU2VxdWVuY2UoQWNjZXNzaWJpbGl0eU5vZGVJbmZvCiAgICAgICAgICAgICAgICAgICAgICAgIC5BQ1RJT05fQVJHVU1FTlRfU0VUX1RFWFRfQ0hBUlNFUVVFTkNFLCBzaWduYXR1cmUuY29tbWVudFN0cmluZyk7CiAgICAgICAgICAgICAgICBub2RlVG9JbnB1dC5wZXJmb3JtQWN0aW9uKEFjY2Vzc2liaWxpdHlOb2RlSW5mby5BQ1RJT05fU0VUX1RFWFQsIGFyZ3VtZW50cyk7CiAgICAgICAgICAgIH0KICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewogICAgICAgICAgICAvLyBOb3Qgc3VwcG9ydAogICAgICAgIH0KICAgIH0KCgogICAgcHJpdmF0ZSBib29sZWFuIGhhc09uZU9mVGhvc2VOb2RlcyhTdHJpbmcuLi4gdGV4dHMpIHsKICAgICAgICBmb3IgKFN0cmluZyB0ZXh0IDogdGV4dHMpIHsKICAgICAgICAgICAgaWYgKHRleHQgPT0gbnVsbCkgY29udGludWU7CgogICAgICAgICAgICBMaXN0PEFjY2Vzc2liaWxpdHlOb2RlSW5mbz4gbm9kZXMgPSB0aGlzLnJvb3ROb2RlSW5mby5maW5kQWNjZXNzaWJpbGl0eU5vZGVJbmZvc0J5VGV4dCh0ZXh0KTsKCiAgICAgICAgICAgIGlmICghbm9kZXMuaXNFbXB0eSgpKSByZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQoKICAgIHByaXZhdGUgQWNjZXNzaWJpbGl0eU5vZGVJbmZvIGdldFRoZUxhc3ROb2RlKFN0cmluZy4uLiB0ZXh0cykgewogICAgICAgIGludCBib3R0b20gPSAwOwogICAgICAgIEFjY2Vzc2liaWxpdHlOb2RlSW5mbyBsYXN0Tm9kZSA9IG51bGw7CgogICAgICAgIGZvciAoU3RyaW5nIHRleHQgOiB0ZXh0cykgewogICAgICAgICAgICBpZiAodGV4dCA9PSBudWxsKSBjb250aW51ZTsKCiAgICAgICAgICAgIExpc3Q8QWNjZXNzaWJpbGl0eU5vZGVJbmZvPiBub2RlcyA9IHRoaXMucm9vdE5vZGVJbmZvLmZpbmRBY2Nlc3NpYmlsaXR5Tm9kZUluZm9zQnlUZXh0KHRleHQpOwoKICAgICAgICAgICAgaWYgKCFub2Rlcy5pc0VtcHR5KCkpIHsKICAgICAgICAgICAgICAgIEFjY2Vzc2liaWxpdHlOb2RlSW5mbyBub2RlID0gbm9kZXMuZ2V0KG5vZGVzLnNpemUoKSAtIDEpOwogICAgICAgICAgICAgICAgUmVjdCBib3VuZHMgPSBuZXcgUmVjdCgpOwogICAgICAgICAgICAgICAgbm9kZS5nZXRCb3VuZHNJblNjcmVlbihib3VuZHMpOwogICAgICAgICAgICAgICAgaWYgKGJvdW5kcy5ib3R0b20gPiBib3R0b20pIHsKICAgICAgICAgICAgICAgICAgICBib3R0b20gPSBib3VuZHMuYm90dG9tOwogICAgICAgICAgICAgICAgICAgIGxhc3ROb2RlID0gbm9kZTsKICAgICAgICAgICAgICAgICAgICBpZiAodGV4dC5lcXVhbHMoV0VDSEFUX1ZJRVdfT1RIRVJTX0NIKSkgewogICAgICAgICAgICAgICAgICAgICAgICBzaWduYXR1cmUub3RoZXJzID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBzaWduYXR1cmUub3RoZXJzID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHJldHVybiBsYXN0Tm9kZTsKICAgIH0KCi8vICAgIEBPdmVycmlkZQovLyAgICBwdWJsaWMgdm9pZCBvblNlcnZpY2VDb25uZWN0ZWQoKSB7Ci8vICAgICAgICBzdXBlci5vblNlcnZpY2VDb25uZWN0ZWQoKTsKLy8gICAgICAgIHRoaXMud2F0Y2hGbGFnc0Zyb21QcmVmZXJlbmNlKCk7Ci8vICAgIH0KCiAgICBwcml2YXRlIHZvaWQgd2F0Y2hGbGFnc0Zyb21QcmVmZXJlbmNlKCkgewogICAgICAgIHNoYXJlZFByZWZlcmVuY2VzID0gUHJlZmVyZW5jZU1hbmFnZXIuZ2V0RGVmYXVsdFNoYXJlZFByZWZlcmVuY2VzKHRoaXMpOwogICAgICAgIHNoYXJlZFByZWZlcmVuY2VzLnJlZ2lzdGVyT25TaGFyZWRQcmVmZXJlbmNlQ2hhbmdlTGlzdGVuZXIodGhpcyk7CgogICAgICAgIHRoaXMucG93ZXJVdGlsID0gbmV3IFBvd2VyVXRpbCh0aGlzKTsKICAgICAgICBCb29sZWFuIHdhdGNoT25Mb2NrRmxhZyA9IHNoYXJlZFByZWZlcmVuY2VzLmdldEJvb2xlYW4oInByZWZfd2F0Y2hfb25fbG9jayIsIGZhbHNlKTsKICAgICAgICB0aGlzLnBvd2VyVXRpbC5oYW5kbGVXYWtlTG9jayh3YXRjaE9uTG9ja0ZsYWcpOwogICAgfQo=</text>
      </register>
      <register name="6" type="2">
        <text encoding="base64">ICAgIHByaXZhdGUgdm9pZCB3YXRjaENoYXQoQWNjZXNzaWJpbGl0eUV2ZW50IGV2ZW50KSB7CiAgICAgICAgdGhpcy5yb290Tm9kZUluZm8gPSBnZXRSb290SW5BY3RpdmVXaW5kb3coKTsKCiAgICAgICAgaWYgKHJvb3ROb2RlSW5mbyA9PSBudWxsKSByZXR1cm47CgogICAgICAgIG1SZWNlaXZlTm9kZSA9IG51bGw7CiAgICAgICAgbVVucGFja05vZGUgPSBudWxsOwoKLy8gICAgICAgIGNoZWNrTm9kZUluZm8oZXZlbnQuZ2V0RXZlbnRUeXBlKCkpOwoKICAgICAgICAvKiDlpoLmnpzlt7Lnu4/mjqXmlLbliLDnuqLljIXlubbkuJTov5jmsqHmnInmiLPlvIAgKi8KICAgICAgICBpZiAobUx1Y2t5TW9uZXlSZWNlaXZlZCAmJiAhbUx1Y2t5TW9uZXlQaWNrZWQgJiYgKG1SZWNlaXZlTm9kZSAhPSBudWxsKSkgewogICAgICAgICAgICBtTXV0ZXggPSB0cnVlOwoKICAgICAgICAgICAgbVJlY2VpdmVOb2RlLmdldFBhcmVudCgpLnBlcmZvcm1BY3Rpb24oQWNjZXNzaWJpbGl0eU5vZGVJbmZvLkFDVElPTl9DTElDSyk7CiAgICAgICAgICAgIG1MdWNreU1vbmV5UmVjZWl2ZWQgPSBmYWxzZTsKICAgICAgICAgICAgbUx1Y2t5TW9uZXlQaWNrZWQgPSB0cnVlOwogICAgICAgIH0KICAgICAgICAvKiDlpoLmnpzmiLPlvIDkvYbov5jmnKrpooblj5YgKi8KICAgICAgICBpZiAobVVucGFja0NvdW50ID09IDEgJiYgKG1VbnBhY2tOb2RlICE9IG51bGwpKSB7CiAgICAgICAgICAgIGludCBkZWxheUZsYWcgPSBzaGFyZWRQcmVmZXJlbmNlcy5nZXRJbnQoInByZWZfb3Blbl9kZWxheSIsIDApICogMTAwMDsKICAgICAgICAgICAgbmV3IGFuZHJvaWQub3MuSGFuZGxlcigpLnBvc3REZWxheWVkKAogICAgICAgICAgICAgICAgICAgIG5ldyBSdW5uYWJsZSgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcHVibGljIHZvaWQgcnVuKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtVW5wYWNrTm9kZS5wZXJmb3JtQWN0aW9uKEFjY2Vzc2liaWxpdHlOb2RlSW5mby5BQ1RJT05fQ0xJQ0spOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtTXV0ZXggPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtTHVja3lNb25leVBpY2tlZCA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1VbnBhY2tDb3VudCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGRlbGF5RmxhZyk7CiAgICAgICAgfQogICAgfQoKICAgIHByaXZhdGUgdm9pZCBzZXRDdXJyZW50QWN0aXZpdHlOYW1lKEFjY2Vzc2liaWxpdHlFdmVudCBldmVudCkgewogICAgICAgIGlmIChldmVudC5nZXRFdmVudFR5cGUoKSAhPSBBY2Nlc3NpYmlsaXR5RXZlbnQuVFlQRV9XSU5ET1dfU1RBVEVfQ0hBTkdFRCkgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICB0cnkgewogICAgICAgICAgICBDb21wb25lbnROYW1lIGNvbXBvbmVudE5hbWUgPSBuZXcgQ29tcG9uZW50TmFtZSgKICAgICAgICAgICAgICAgICAgICBldmVudC5nZXRQYWNrYWdlTmFtZSgpLnRvU3RyaW5nKCksCiAgICAgICAgICAgICAgICAgICAgZXZlbnQuZ2V0Q2xhc3NOYW1lKCkudG9TdHJpbmcoKQogICAgICAgICAgICApOwoKICAgICAgICAgICAgZ2V0UGFja2FnZU1hbmFnZXIoKS5nZXRBY3Rpdml0eUluZm8oY29tcG9uZW50TmFtZSwgMCk7CiAgICAgICAgICAgIGN1cnJlbnRBY3Rpdml0eU5hbWUgPSBjb21wb25lbnROYW1lLmZsYXR0ZW5Ub1Nob3J0U3RyaW5nKCk7CiAgICAgICAgfSBjYXRjaCAoUGFja2FnZU1hbmFnZXIuTmFtZU5vdEZvdW5kRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgY3VycmVudEFjdGl2aXR5TmFtZSA9IFdFQ0hBVF9MVUNLTU9ORVlfR0VORVJBTF9BQ1RJVklUWTsKICAgICAgICB9CiAgICB9CgogICAgcHJpdmF0ZSBib29sZWFuIHdhdGNoTGlzdChBY2Nlc3NpYmlsaXR5RXZlbnQgZXZlbnQpIHsKICAgICAgICBpZiAobUxpc3RNdXRleCkgcmV0dXJuIGZhbHNlOwogICAgICAgIG1MaXN0TXV0ZXggPSB0cnVlOwogICAgICAgIEFjY2Vzc2liaWxpdHlOb2RlSW5mbyBldmVudFNvdXJjZSA9IGV2ZW50LmdldFNvdXJjZSgpOwogICAgICAgIC8vIE5vdCBhIG1lc3NhZ2UKICAgICAgICBpZiAoZXZlbnQuZ2V0RXZlbnRUeXBlKCkgIT0gQWNjZXNzaWJpbGl0eUV2ZW50LlRZUEVfV0lORE9XX0NPTlRFTlRfQ0hBTkdFRCB8fCBldmVudFNvdXJjZSA9PSBudWxsKQogICAgICAgICAgICByZXR1cm4gZmFsc2U7CgogICAgICAgIExpc3Q8QWNjZXNzaWJpbGl0eU5vZGVJbmZvPiBub2RlcyA9IGV2ZW50U291cmNlLmZpbmRBY2Nlc3NpYmlsaXR5Tm9kZUluZm9zQnlUZXh0KFdFQ0hBVF9OT1RJRklDQVRJT05fVElQKTsKICAgICAgICAvL+WinuWKoOadoeS7tuWIpOaWrWN1cnJlbnRBY3Rpdml0eU5hbWUuY29udGFpbnMoV0VDSEFUX0xVQ0tNT05FWV9HRU5FUkFMX0FDVElWSVRZKQogICAgICAgIC8v6YG/5YWN5b2T6K6i6ZiF5Y+35Lit5Ye6546w5qCH6aKY5Li64oCcW+W+ruS/oee6ouWMhV3mi5zlubTnuqLljIXigJ3vvIjlhbblrp7lubbpnZ7nuqLljIXvvInnmoTkv6Hmga/ml7bor6/liKQKICAgICAgICBpZiAoIW5vZGVzLmlzRW1wdHkoKSAmJiBjdXJyZW50QWN0aXZpdHlOYW1lLmNvbnRhaW5zKFdFQ0hBVF9MVUNLTU9ORVlfR0VORVJBTF9BQ1RJVklUWSkpIHsKICAgICAgICAgICAgQWNjZXNzaWJpbGl0eU5vZGVJbmZvIG5vZGVUb0NsaWNrID0gbm9kZXMuZ2V0KDApOwogICAgICAgICAgICBDaGFyU2VxdWVuY2UgY29udGVudERlc2NyaXB0aW9uID0gbm9kZVRvQ2xpY2suZ2V0Q29udGVudERlc2NyaXB0aW9uKCk7CiAgICAgICAgICAgIGlmIChjb250ZW50RGVzY3JpcHRpb24gIT0gbnVsbCAmJiAhc2lnbmF0dXJlLmdldENvbnRlbnREZXNjcmlwdGlvbigpLmVxdWFscyhjb250ZW50RGVzY3JpcHRpb24pKSB7CiAgICAgICAgICAgICAgICBub2RlVG9DbGljay5wZXJmb3JtQWN0aW9uKEFjY2Vzc2liaWxpdHlOb2RlSW5mby5BQ1RJT05fQ0xJQ0spOwogICAgICAgICAgICAgICAgc2lnbmF0dXJlLnNldENvbnRlbnREZXNjcmlwdGlvbihjb250ZW50RGVzY3JpcHRpb24udG9TdHJpbmcoKSk7CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAgcHJpdmF0ZSBib29sZWFuIHdhdGNoTm90aWZpY2F0aW9ucyhBY2Nlc3NpYmlsaXR5RXZlbnQgZXZlbnQpIHsKICAgICAgICAvLyBOb3QgYSBub3RpZmljYXRpb24KICAgICAgICBpZiAoZXZlbnQuZ2V0RXZlbnRUeXBlKCkgIT0gQWNjZXNzaWJpbGl0eUV2ZW50LlRZUEVfTk9USUZJQ0FUSU9OX1NUQVRFX0NIQU5HRUQpCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCiAgICAgICAgLy8gTm90IGEgaG9uZ2JhbwogICAgICAgIFN0cmluZyB0aXAgPSBldmVudC5nZXRUZXh0KCkudG9TdHJpbmcoKTsKICAgICAgICBpZiAoIXRpcC5jb250YWlucyhXRUNIQVRfTk9USUZJQ0FUSU9OX1RJUCkpIHJldHVybiB0cnVlOwoKICAgICAgICBQYXJjZWxhYmxlIHBhcmNlbGFibGUgPSBldmVudC5nZXRQYXJjZWxhYmxlRGF0YSgpOwogICAgICAgIGlmIChwYXJjZWxhYmxlIGluc3RhbmNlb2YgTm90aWZpY2F0aW9uKSB7CiAgICAgICAgICAgIE5vdGlmaWNhdGlvbiBub3RpZmljYXRpb24gPSAoTm90aWZpY2F0aW9uKSBwYXJjZWxhYmxlOwogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgLyog5riF6Zmkc2lnbmF0dXJlLOmBv+WFjei/m+WFpeS8muivneWQjuivr+WIpCAqLwogICAgICAgICAgICAgICAgc2lnbmF0dXJlLmNsZWFuU2lnbmF0dXJlKCk7CgogICAgICAgICAgICAgICAgbm90aWZpY2F0aW9uLmNvbnRlbnRJbnRlbnQuc2VuZCgpOwogICAgICAgICAgICB9IGNhdGNoIChQZW5kaW5nSW50ZW50LkNhbmNlbGVkRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9Cg==</text>
      </register>
      <register name="7" type="2">
        <text encoding="base64">aW1wb3J0IHh5ei5tb25rZXl0b25nLmhvbmdiYW8udXRpbHMuSG9uZ2Jhb1NpZ25hdHVyZTsKaW1wb3J0IHh5ei5tb25rZXl0b25nLmhvbmdiYW8udXRpbHMuUG93ZXJVdGlsOwo=</text>
      </register>
      <register name="8" type="2">
        <text encoding="base64">cGFja2FnZSB4eXoubW9ua2V5dG9uZy5ob25nYmFvLnNlcnZpY2VzOwoKaW1wb3J0IGFuZHJvaWQuYWNjZXNzaWJpbGl0eXNlcnZpY2UuQWNjZXNzaWJpbGl0eVNlcnZpY2U7CmltcG9ydCBhbmRyb2lkLmFwcC5Ob3RpZmljYXRpb247CmltcG9ydCBhbmRyb2lkLmFwcC5QZW5kaW5nSW50ZW50OwppbXBvcnQgYW5kcm9pZC5jb250ZW50LkNvbXBvbmVudE5hbWU7CmltcG9ydCBhbmRyb2lkLmNvbnRlbnQuU2hhcmVkUHJlZmVyZW5jZXM7CmltcG9ydCBhbmRyb2lkLmNvbnRlbnQucG0uUGFja2FnZU1hbmFnZXI7CmltcG9ydCBhbmRyb2lkLmdyYXBoaWNzLlJlY3Q7CmltcG9ydCBhbmRyb2lkLm9zLkJ1bmRsZTsKaW1wb3J0IGFuZHJvaWQub3MuUGFyY2VsYWJsZTsKaW1wb3J0IGFuZHJvaWQucHJlZmVyZW5jZS5QcmVmZXJlbmNlTWFuYWdlcjsKaW1wb3J0IGFuZHJvaWQudXRpbC5Mb2c7CmltcG9ydCBhbmRyb2lkLnZpZXcuYWNjZXNzaWJpbGl0eS5BY2Nlc3NpYmlsaXR5RXZlbnQ7CmltcG9ydCBhbmRyb2lkLnZpZXcuYWNjZXNzaWJpbGl0eS5BY2Nlc3NpYmlsaXR5Tm9kZUluZm87CmltcG9ydCB4eXoubW9ua2V5dG9uZy5ob25nYmFvLnV0aWxzLkhvbmdiYW9TaWduYXR1cmU7CmltcG9ydCB4eXoubW9ua2V5dG9uZy5ob25nYmFvLnV0aWxzLlBvd2VyVXRpbDsKCmltcG9ydCBqYXZhLnV0aWwuTGlzdDsKCmltcG9ydCB4eXoubW9ua2V5dG9uZy5ob25nYmFvLnV0aWxzLkhvbmdiYW9TaWduYXR1cmU7CmltcG9ydCB4eXoubW9ua2V5dG9uZy5ob25nYmFvLnV0aWxzLlBvd2VyVXRpbDsKCgpwdWJsaWMgY2xhc3MgSG9uZ2Jhb1NlcnZpY2UgZXh0ZW5kcyBBY2Nlc3NpYmlsaXR5U2VydmljZSBpbXBsZW1lbnRzIFNoYXJlZFByZWZlcmVuY2VzLk9uU2hhcmVkUHJlZmVyZW5jZUNoYW5nZUxpc3RlbmVyIHsKICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIFN0cmluZyBXRUNIQVRfREVUQUlMU19FTiA9ICJEZXRhaWxzIjsKICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIFN0cmluZyBXRUNIQVRfREVUQUlMU19DSCA9ICLnuqLljIXor6bmg4UiOwogICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgU3RyaW5nIFdFQ0hBVF9CRVRURVJfTFVDS19FTiA9ICJCZXR0ZXIgbHVjayBuZXh0IHRpbWUhIjsKICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIFN0cmluZyBXRUNIQVRfQkVUVEVSX0xVQ0tfQ0ggPSAi5omL5oWi5LqGIjsKICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIFN0cmluZyBXRUNIQVRfRVhQSVJFU19DSCA9ICLnuqLljIXlt7LlpLHmlYgiOwogICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgU3RyaW5nIFdFQ0hBVF9WSUVXX1NFTEZfQ0ggPSAi5p+l55yL57qi5YyFIjsKICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIFN0cmluZyBXRUNIQVRfVklFV19PVEhFUlNfQ0ggPSAi6aKG5Y+W57qi5YyFIjsKICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIFN0cmluZyBXRUNIQVRfTk9USUZJQ0FUSU9OX1RJUCA9ICJb5b6u5L+h57qi5YyFXSI7CiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBTdHJpbmcgV0VDSEFUX0xVQ0tNT05FWV9SRUNFSVZFX0FDVElWSVRZID0gIkx1Y2t5TW9uZXlSZWNlaXZlVUkiOwogICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgU3RyaW5nIFdFQ0hBVF9MVUNLTU9ORVlfREVUQUlMX0FDVElWSVRZID0gIkx1Y2t5TW9uZXlEZXRhaWxVSSI7CiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBTdHJpbmcgV0VDSEFUX0xVQ0tNT05FWV9HRU5FUkFMX0FDVElWSVRZID0gIkxhdW5jaGVyVUkiOwogICAgcHJpdmF0ZSBTdHJpbmcgY3VycmVudEFjdGl2aXR5TmFtZSA9IFdFQ0hBVF9MVUNLTU9ORVlfR0VORVJBTF9BQ1RJVklUWTsKCiAgICBwcml2YXRlIEFjY2Vzc2liaWxpdHlOb2RlSW5mbyByb290Tm9kZUluZm8sIG1SZWNlaXZlTm9kZSwgbVVucGFja05vZGU7CiAgICBwcml2YXRlIGJvb2xlYW4gbUx1Y2t5TW9uZXlQaWNrZWQsIG1MdWNreU1vbmV5UmVjZWl2ZWQ7CiAgICBwcml2YXRlIGludCBtVW5wYWNrQ291bnQgPSAwOwogICAgcHJpdmF0ZSBib29sZWFuIG1NdXRleCA9IGZhbHNlLCBtTGlzdE11dGV4ID0gZmFsc2U7CiAgICBwcml2YXRlIEhvbmdiYW9TaWduYXR1cmUgc2lnbmF0dXJlID0gbmV3IEhvbmdiYW9TaWduYXR1cmUoKTsKCiAgICBwcml2YXRlIFBvd2VyVXRpbCBwb3dlclV0aWw7CiAgICBwcml2YXRlIFNoYXJlZFByZWZlcmVuY2VzIHNoYXJlZFByZWZlcmVuY2VzOwoKICAgIC8qKgogICAgICogQWNjZXNzaWJpbGl0eUV2ZW50CiAgICAgKgogICAgICogQHBhcmFtIGV2ZW50IOS6i+S7tgogICAgICovCiAgICBAT3ZlcnJpZGUKICAgIHB1YmxpYyB2b2lkIG9uQWNjZXNzaWJpbGl0eUV2ZW50KEFjY2Vzc2liaWxpdHlFdmVudCBldmVudCkgewogICAgICAgIGlmIChzaGFyZWRQcmVmZXJlbmNlcyA9PSBudWxsKSByZXR1cm47CgogICAgICAgIHNldEN1cnJlbnRBY3Rpdml0eU5hbWUoZXZlbnQpOwoKICAgICAgICAvKiDmo4DmtYvpgJrnn6Xmtojmga8gKi8KICAgICAgICBpZiAoIW1NdXRleCkgewogICAgICAgICAgICBpZiAoc2hhcmVkUHJlZmVyZW5jZXMuZ2V0Qm9vbGVhbigicHJlZl93YXRjaF9ub3RpZmljYXRpb24iLCBmYWxzZSkgJiYgd2F0Y2hOb3RpZmljYXRpb25zKGV2ZW50KSkgcmV0dXJuOwogICAgICAgICAgICBpZiAoc2hhcmVkUHJlZmVyZW5jZXMuZ2V0Qm9vbGVhbigicHJlZl93YXRjaF9saXN0IiwgZmFsc2UpICYmIHdhdGNoTGlzdChldmVudCkpIHJldHVybjsKICAgICAgICAgICAgbUxpc3RNdXRleCA9IGZhbHNlOwogICAgICAgIH0KCiAgICAgICAgaWYgKHNoYXJlZFByZWZlcmVuY2VzLmdldEJvb2xlYW4oInByZWZfd2F0Y2hfY2hhdCIsIGZhbHNlKSkgd2F0Y2hDaGF0KGV2ZW50KTsKICAgIH0KCiAgICBwcml2YXRlIHZvaWQgd2F0Y2hDaGF0KEFjY2Vzc2liaWxpdHlFdmVudCBldmVudCkgewogICAgICAgIHRoaXMucm9vdE5vZGVJbmZvID0gZ2V0Um9vdEluQWN0aXZlV2luZG93KCk7CgogICAgICAgIGlmIChyb290Tm9kZUluZm8gPT0gbnVsbCkgcmV0dXJuOwoKICAgICAgICBtUmVjZWl2ZU5vZGUgPSBudWxsOwogICAgICAgIG1VbnBhY2tOb2RlID0gbnVsbDsKCiAgICAgICAgY2hlY2tOb2RlSW5mbyhldmVudC5nZXRFdmVudFR5cGUoKSk7CgogICAgICAgIC8qIOWmguaenOW3sue7j+aOpeaUtuWIsOe6ouWMheW5tuS4lOi/mOayoeacieaIs+W8gCAqLwogICAgICAgIGlmIChtTHVja3lNb25leVJlY2VpdmVkICYmICFtTHVja3lNb25leVBpY2tlZCAmJiAobVJlY2VpdmVOb2RlICE9IG51bGwpKSB7CiAgICAgICAgICAgIG1NdXRleCA9IHRydWU7CgogICAgICAgICAgICBtUmVjZWl2ZU5vZGUuZ2V0UGFyZW50KCkucGVyZm9ybUFjdGlvbihBY2Nlc3NpYmlsaXR5Tm9kZUluZm8uQUNUSU9OX0NMSUNLKTsKICAgICAgICAgICAgbUx1Y2t5TW9uZXlSZWNlaXZlZCA9IGZhbHNlOwogICAgICAgICAgICBtTHVja3lNb25leVBpY2tlZCA9IHRydWU7CiAgICAgICAgfQogICAgICAgIC8qIOWmguaenOaIs+W8gOS9hui/mOacqumihuWPliAqLwogICAgICAgIGlmIChtVW5wYWNrQ291bnQgPT0gMSAmJiAobVVucGFja05vZGUgIT0gbnVsbCkpIHsKICAgICAgICAgICAgaW50IGRlbGF5RmxhZyA9IHNoYXJlZFByZWZlcmVuY2VzLmdldEludCgicHJlZl9vcGVuX2RlbGF5IiwgMCkgKiAxMDAwOwogICAgICAgICAgICBuZXcgYW5kcm9pZC5vcy5IYW5kbGVyKCkucG9zdERlbGF5ZWQoCiAgICAgICAgICAgICAgICAgICAgbmV3IFJ1bm5hYmxlKCkgewogICAgICAgICAgICAgICAgICAgICAgICBwdWJsaWMgdm9pZCBydW4oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1VbnBhY2tOb2RlLnBlcmZvcm1BY3Rpb24oQWNjZXNzaWJpbGl0eU5vZGVJbmZvLkFDVElPTl9DTElDSyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1NdXRleCA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1MdWNreU1vbmV5UGlja2VkID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbVVucGFja0NvdW50ID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgZGVsYXlGbGFnKTsKICAgICAgICB9CiAgICB9CgogICAgcHJpdmF0ZSB2b2lkIHNldEN1cnJlbnRBY3Rpdml0eU5hbWUoQWNjZXNzaWJpbGl0eUV2ZW50IGV2ZW50KSB7CiAgICAgICAgaWYgKGV2ZW50LmdldEV2ZW50VHlwZSgpICE9IEFjY2Vzc2liaWxpdHlFdmVudC5UWVBFX1dJTkRPV19TVEFURV9DSEFOR0VEKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIHRyeSB7CiAgICAgICAgICAgIENvbXBvbmVudE5hbWUgY29tcG9uZW50TmFtZSA9IG5ldyBDb21wb25lbnROYW1lKAogICAgICAgICAgICAgICAgICAgIGV2ZW50LmdldFBhY2thZ2VOYW1lKCkudG9TdHJpbmcoKSwKICAgICAgICAgICAgICAgICAgICBldmVudC5nZXRDbGFzc05hbWUoKS50b1N0cmluZygpCiAgICAgICAgICAgICk7CgogICAgICAgICAgICBnZXRQYWNrYWdlTWFuYWdlcigpLmdldEFjdGl2aXR5SW5mbyhjb21wb25lbnROYW1lLCAwKTsKICAgICAgICAgICAgY3VycmVudEFjdGl2aXR5TmFtZSA9IGNvbXBvbmVudE5hbWUuZmxhdHRlblRvU2hvcnRTdHJpbmcoKTsKICAgICAgICB9IGNhdGNoIChQYWNrYWdlTWFuYWdlci5OYW1lTm90Rm91bmRFeGNlcHRpb24gZSkgewogICAgICAgICAgICBjdXJyZW50QWN0aXZpdHlOYW1lID0gV0VDSEFUX0xVQ0tNT05FWV9HRU5FUkFMX0FDVElWSVRZOwogICAgICAgIH0KICAgIH0KCiAgICBwcml2YXRlIGJvb2xlYW4gd2F0Y2hMaXN0KEFjY2Vzc2liaWxpdHlFdmVudCBldmVudCkgewogICAgICAgIGlmIChtTGlzdE11dGV4KSByZXR1cm4gZmFsc2U7CiAgICAgICAgbUxpc3RNdXRleCA9IHRydWU7CiAgICAgICAgQWNjZXNzaWJpbGl0eU5vZGVJbmZvIGV2ZW50U291cmNlID0gZXZlbnQuZ2V0U291cmNlKCk7CiAgICAgICAgLy8gTm90IGEgbWVzc2FnZQogICAgICAgIGlmIChldmVudC5nZXRFdmVudFR5cGUoKSAhPSBBY2Nlc3NpYmlsaXR5RXZlbnQuVFlQRV9XSU5ET1dfQ09OVEVOVF9DSEFOR0VEIHx8IGV2ZW50U291cmNlID09IG51bGwpCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCiAgICAgICAgTGlzdDxBY2Nlc3NpYmlsaXR5Tm9kZUluZm8+IG5vZGVzID0gZXZlbnRTb3VyY2UuZmluZEFjY2Vzc2liaWxpdHlOb2RlSW5mb3NCeVRleHQoV0VDSEFUX05PVElGSUNBVElPTl9USVApOwogICAgICAgIC8v5aKe5Yqg5p2h5Lu25Yik5patY3VycmVudEFjdGl2aXR5TmFtZS5jb250YWlucyhXRUNIQVRfTFVDS01PTkVZX0dFTkVSQUxfQUNUSVZJVFkpCiAgICAgICAgLy/pgb/lhY3lvZPorqLpmIXlj7fkuK3lh7rnjrDmoIfpopjkuLrigJxb5b6u5L+h57qi5YyFXeaLnOW5tOe6ouWMheKAne+8iOWFtuWunuW5tumdnue6ouWMhe+8ieeahOS/oeaBr+aXtuivr+WIpAogICAgICAgIGlmICghbm9kZXMuaXNFbXB0eSgpICYmIGN1cnJlbnRBY3Rpdml0eU5hbWUuY29udGFpbnMoV0VDSEFUX0xVQ0tNT05FWV9HRU5FUkFMX0FDVElWSVRZKSkgewogICAgICAgICAgICBBY2Nlc3NpYmlsaXR5Tm9kZUluZm8gbm9kZVRvQ2xpY2sgPSBub2Rlcy5nZXQoMCk7CiAgICAgICAgICAgIENoYXJTZXF1ZW5jZSBjb250ZW50RGVzY3JpcHRpb24gPSBub2RlVG9DbGljay5nZXRDb250ZW50RGVzY3JpcHRpb24oKTsKICAgICAgICAgICAgaWYgKGNvbnRlbnREZXNjcmlwdGlvbiAhPSBudWxsICYmICFzaWduYXR1cmUuZ2V0Q29udGVudERlc2NyaXB0aW9uKCkuZXF1YWxzKGNvbnRlbnREZXNjcmlwdGlvbikpIHsKICAgICAgICAgICAgICAgIG5vZGVUb0NsaWNrLnBlcmZvcm1BY3Rpb24oQWNjZXNzaWJpbGl0eU5vZGVJbmZvLkFDVElPTl9DTElDSyk7CiAgICAgICAgICAgICAgICBzaWduYXR1cmUuc2V0Q29udGVudERlc2NyaXB0aW9uKGNvbnRlbnREZXNjcmlwdGlvbi50b1N0cmluZygpKTsKICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICBwcml2YXRlIGJvb2xlYW4gd2F0Y2hOb3RpZmljYXRpb25zKEFjY2Vzc2liaWxpdHlFdmVudCBldmVudCkgewogICAgICAgIC8vIE5vdCBhIG5vdGlmaWNhdGlvbgogICAgICAgIGlmIChldmVudC5nZXRFdmVudFR5cGUoKSAhPSBBY2Nlc3NpYmlsaXR5RXZlbnQuVFlQRV9OT1RJRklDQVRJT05fU1RBVEVfQ0hBTkdFRCkKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoKICAgICAgICAvLyBOb3QgYSBob25nYmFvCiAgICAgICAgU3RyaW5nIHRpcCA9IGV2ZW50LmdldFRleHQoKS50b1N0cmluZygpOwogICAgICAgIGlmICghdGlwLmNvbnRhaW5zKFdFQ0hBVF9OT1RJRklDQVRJT05fVElQKSkgcmV0dXJuIHRydWU7CgogICAgICAgIFBhcmNlbGFibGUgcGFyY2VsYWJsZSA9IGV2ZW50LmdldFBhcmNlbGFibGVEYXRhKCk7CiAgICAgICAgaWYgKHBhcmNlbGFibGUgaW5zdGFuY2VvZiBOb3RpZmljYXRpb24pIHsKICAgICAgICAgICAgTm90aWZpY2F0aW9uIG5vdGlmaWNhdGlvbiA9IChOb3RpZmljYXRpb24pIHBhcmNlbGFibGU7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAvKiDmuIXpmaRzaWduYXR1cmUs6YG/5YWN6L+b5YWl5Lya6K+d5ZCO6K+v5YikICovCiAgICAgICAgICAgICAgICBzaWduYXR1cmUuY2xlYW5TaWduYXR1cmUoKTsKCiAgICAgICAgICAgICAgICBub3RpZmljYXRpb24uY29udGVudEludGVudC5zZW5kKCk7CiAgICAgICAgICAgIH0gY2F0Y2ggKFBlbmRpbmdJbnRlbnQuQ2FuY2VsZWRFeGNlcHRpb24gZSkgewogICAgICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBAT3ZlcnJpZGUKICAgIHB1YmxpYyB2b2lkIG9uSW50ZXJydXB0KCkgewoKICAgIH0KCiAgICAvKioKICAgICAqIOe6ouWMhSDpkq4KICAgICAqLwogICAgcHJpdmF0ZSBBY2Nlc3NpYmlsaXR5Tm9kZUluZm8gZmluZE9wZW5CdXR0b24oQWNjZXNzaWJpbGl0eU5vZGVJbmZvIG5vZGUpIHsKICAgICAgICBpZiAobm9kZSA9PSBudWxsKQogICAgICAgICAgICByZXR1cm4gbnVsbDsKCiAgICAgICAgLy/pnZ5sYXlvdXTlhYPntKAKICAgICAgICBpZiAobm9kZS5nZXRDaGlsZENvdW50KCkgPT0gMCkgewogICAgICAgICAgICBpZiAoImFuZHJvaWQud2lkZ2V0LkJ1dHRvbiIuZXF1YWxzKG5vZGUuZ2V0Q2xhc3NOYW1lKCkpKQogICAgICAgICAgICAgICAgcmV0dXJuIG5vZGU7CiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgIH0KCiAgICAgICAgLy9sYXlvdXTlhYPntKDvvIzpgY3ljobmib5idXR0b24KICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IG5vZGUuZ2V0Q2hpbGRDb3VudCgpOyBpKyspIHsKICAgICAgICAgICAgQWNjZXNzaWJpbGl0eU5vZGVJbmZvIGJ1dHRvbiA9IGZpbmRPcGVuQnV0dG9uKG5vZGUuZ2V0Q2hpbGQoaSkpOwogICAgICAgICAgICBpZiAoYnV0dG9uICE9IG51bGwpCiAgICAgICAgICAgICAgICByZXR1cm4gYnV0dG9uOwogICAgICAgIH0KICAgICAgICByZXR1cm4gbnVsbDsKICAgIH0KCiAgICAvKioKICAgICAqIOiKgiDkv6EKICAgICAqLwogICAgcHJpdmF0ZSB2b2lkIGNoZWNrTm9kZUluZm8oaW50IGV2ZW50VHlwZSkgewogICAgICAgIGlmICh0aGlzLnJvb3ROb2RlSW5mbyA9PSBudWxsKSByZXR1cm47CgogICAgICAgIGlmIChzaWduYXR1cmUuY29tbWVudFN0cmluZyAhPSBudWxsKSB7CiAgICAgICAgICAgIHNlbmRDb21tZW50KCk7CiAgICAgICAgICAgIHNpZ25hdHVyZS5jb21tZW50U3RyaW5nID0gbnVsbDsKICAgICAgICB9CgogICAgICAgIC8qIOiBiuWkqeS8muivneeql+WPo++8jOmBjeWOhuiKgueCueWMuemFjeKAnOmihuWPlue6ouWMheKAneWSjCLmn6XnnIvnuqLljIUiICovCiAgICAgICAgQWNjZXNzaWJpbGl0eU5vZGVJbmZvIG5vZGUxID0gKHNoYXJlZFByZWZlcmVuY2VzLmdldEJvb2xlYW4oInByZWZfd2F0Y2hfc2VsZiIsIGZhbHNlKSkgPwogICAgICAgICAgICAgICAgdGhpcy5nZXRUaGVMYXN0Tm9kZShXRUNIQVRfVklFV19PVEhFUlNfQ0gsIFdFQ0hBVF9WSUVXX1NFTEZfQ0gpIDogdGhpcy5nZXRUaGVMYXN0Tm9kZShXRUNIQVRfVklFV19PVEhFUlNfQ0gpOwogICAgICAgIGlmIChub2RlMSAhPSBudWxsICYmIGN1cnJlbnRBY3Rpdml0eU5hbWUuY29udGFpbnMoV0VDSEFUX0xVQ0tNT05FWV9HRU5FUkFMX0FDVElWSVRZKSkgewogICAgICAgICAgICBTdHJpbmcgZXhjbHVkZVdvcmRzID0gc2hhcmVkUHJlZmVyZW5jZXMuZ2V0U3RyaW5nKCJwcmVmX3dhdGNoX2V4Y2x1ZGVfd29yZHMiLCAiIik7CiAgICAgICAgICAgIGlmICh0aGlzLnNpZ25hdHVyZS5nZW5lcmF0ZVNpZ25hdHVyZShub2RlMSwgZXhjbHVkZVdvcmRzKSkgewogICAgICAgICAgICAgICAgbUx1Y2t5TW9uZXlSZWNlaXZlZCA9IHRydWU7CiAgICAgICAgICAgICAgICBtUmVjZWl2ZU5vZGUgPSBub2RlMTsKICAgICAgICAgICAgICAgIExvZy5kKCJzaWciLCB0aGlzLnNpZ25hdHVyZS50b1N0cmluZygpKTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICAvKiDmiLPlvIDnuqLljIXvvIznuqLljIXov5jmsqHmiqLlrozvvIzpgY3ljoboioLngrnljLnphY3igJzmi4bnuqLljIXigJ0gKi8KICAgICAgICBBY2Nlc3NpYmlsaXR5Tm9kZUluZm8gbm9kZTIgPSBmaW5kT3BlbkJ1dHRvbih0aGlzLnJvb3ROb2RlSW5mbyk7CiAgICAgICAgaWYgKG5vZGUyICE9IG51bGwgJiYgImFuZHJvaWQud2lkZ2V0LkJ1dHRvbiIuZXF1YWxzKG5vZGUyLmdldENsYXNzTmFtZSgpKSAmJiBjdXJyZW50QWN0aXZpdHlOYW1lLmNvbnRhaW5zKFdFQ0hBVF9MVUNLTU9ORVlfUkVDRUlWRV9BQ1RJVklUWSkpIHsKICAgICAgICAgICAgbVVucGFja05vZGUgPSBub2RlMjsKICAgICAgICAgICAgbVVucGFja0NvdW50ICs9IDE7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIC8qIOaIs+W8gOe6ouWMhe+8jOe6ouWMheW3suiiq+aKouWujO+8jOmBjeWOhuiKgueCueWMuemFjeKAnOe6ouWMheivpuaDheKAneWSjOKAnOaJi+aFouS6huKAnSAqLwogICAgICAgIGJvb2xlYW4gaGFzTm9kZXMgPSB0aGlzLmhhc09uZU9mVGhvc2VOb2RlcygKICAgICAgICAgICAgICAgIFdFQ0hBVF9CRVRURVJfTFVDS19DSCwgV0VDSEFUX0RFVEFJTFNfQ0gsCiAgICAgICAgICAgICAgICBXRUNIQVRfQkVUVEVSX0xVQ0tfRU4sIFdFQ0hBVF9ERVRBSUxTX0VOLCBXRUNIQVRfRVhQSVJFU19DSCk7CiAgICAgICAgaWYgKG1NdXRleCAmJiBldmVudFR5cGUgPT0gQWNjZXNzaWJpbGl0eUV2ZW50LlRZUEVfV0lORE9XX1NUQVRFX0NIQU5HRUQgJiYgaGFzTm9kZXMKICAgICAgICAgICAgICAgICYmIChjdXJyZW50QWN0aXZpdHlOYW1lLmNvbnRhaW5zKFdFQ0hBVF9MVUNLTU9ORVlfREVUQUlMX0FDVElWSVRZKQogICAgICAgICAgICAgICAgfHwgY3VycmVudEFjdGl2aXR5TmFtZS5jb250YWlucyhXRUNIQVRfTFVDS01PTkVZX1JFQ0VJVkVfQUNUSVZJVFkpKSkgewogICAgICAgICAgICBtTXV0ZXggPSBmYWxzZTsKICAgICAgICAgICAgbUx1Y2t5TW9uZXlQaWNrZWQgPSBmYWxzZTsKICAgICAgICAgICAgbVVucGFja0NvdW50ID0gMDsKICAgICAgICAgICAgcGVyZm9ybUdsb2JhbEFjdGlvbihHTE9CQUxfQUNUSU9OX0JBQ0spOwogICAgICAgICAgICBzaWduYXR1cmUuY29tbWVudFN0cmluZyA9IGdlbmVyYXRlQ29tbWVudFN0cmluZygpOwogICAgICAgIH0KICAgIH0KCiAgICBwcml2YXRlIHZvaWQgc2VuZENvbW1lbnQoKSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgQWNjZXNzaWJpbGl0eU5vZGVJbmZvIG91dE5vZGUgPQogICAgICAgICAgICAgICAgICAgIGdldFJvb3RJbkFjdGl2ZVdpbmRvdygpLmdldENoaWxkKDApLmdldENoaWxkKDApOwogICAgICAgICAgICBBY2Nlc3NpYmlsaXR5Tm9kZUluZm8gbm9kZVRvSW5wdXQgPSBvdXROb2RlLmdldENoaWxkKG91dE5vZGUuZ2V0Q2hpbGRDb3VudCgpIC0gMSkuZ2V0Q2hpbGQoMCkuZ2V0Q2hpbGQoMSk7CgogICAgICAgICAgICBpZiAoImFuZHJvaWQud2lkZ2V0LkVkaXRUZXh0Ii5lcXVhbHMobm9kZVRvSW5wdXQuZ2V0Q2xhc3NOYW1lKCkpKSB7CiAgICAgICAgICAgICAgICBCdW5kbGUgYXJndW1lbnRzID0gbmV3IEJ1bmRsZSgpOwogICAgICAgICAgICAgICAgYXJndW1lbnRzLnB1dENoYXJTZXF1ZW5jZShBY2Nlc3NpYmlsaXR5Tm9kZUluZm8KICAgICAgICAgICAgICAgICAgICAgICAgLkFDVElPTl9BUkdVTUVOVF9TRVRfVEVYVF9DSEFSU0VRVUVOQ0UsIHNpZ25hdHVyZS5jb21tZW50U3RyaW5nKTsKICAgICAgICAgICAgICAgIG5vZGVUb0lucHV0LnBlcmZvcm1BY3Rpb24oQWNjZXNzaWJpbGl0eU5vZGVJbmZvLkFDVElPTl9TRVRfVEVYVCwgYXJndW1lbnRzKTsKICAgICAgICAgICAgfQogICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgIC8vIE5vdCBzdXBwb3J0CiAgICAgICAgfQogICAgfQoKCiAgICBwcml2YXRlIGJvb2xlYW4gaGFzT25lT2ZUaG9zZU5vZGVzKFN0cmluZy4uLiB0ZXh0cykgewogICAgICAgIGZvciAoU3RyaW5nIHRleHQgOiB0ZXh0cykgewogICAgICAgICAgICBpZiAodGV4dCA9PSBudWxsKSBjb250aW51ZTsKCiAgICAgICAgICAgIExpc3Q8QWNjZXNzaWJpbGl0eU5vZGVJbmZvPiBub2RlcyA9IHRoaXMucm9vdE5vZGVJbmZvLmZpbmRBY2Nlc3NpYmlsaXR5Tm9kZUluZm9zQnlUZXh0KHRleHQpOwoKICAgICAgICAgICAgaWYgKCFub2Rlcy5pc0VtcHR5KCkpIHJldHVybiB0cnVlOwogICAgICAgIH0KICAgICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAgcHJpdmF0ZSBBY2Nlc3NpYmlsaXR5Tm9kZUluZm8gZ2V0VGhlTGFzdE5vZGUoU3RyaW5nLi4uIHRleHRzKSB7CiAgICAgICAgaW50IGJvdHRvbSA9IDA7CiAgICAgICAgQWNjZXNzaWJpbGl0eU5vZGVJbmZvIGxhc3ROb2RlID0gbnVsbDsKCiAgICAgICAgZm9yIChTdHJpbmcgdGV4dCA6IHRleHRzKSB7CiAgICAgICAgICAgIGlmICh0ZXh0ID09IG51bGwpIGNvbnRpbnVlOwoKICAgICAgICAgICAgTGlzdDxBY2Nlc3NpYmlsaXR5Tm9kZUluZm8+IG5vZGVzID0gdGhpcy5yb290Tm9kZUluZm8uZmluZEFjY2Vzc2liaWxpdHlOb2RlSW5mb3NCeVRleHQodGV4dCk7CgogICAgICAgICAgICBpZiAoIW5vZGVzLmlzRW1wdHkoKSkgewogICAgICAgICAgICAgICAgQWNjZXNzaWJpbGl0eU5vZGVJbmZvIG5vZGUgPSBub2Rlcy5nZXQobm9kZXMuc2l6ZSgpIC0gMSk7CiAgICAgICAgICAgICAgICBSZWN0IGJvdW5kcyA9IG5ldyBSZWN0KCk7CiAgICAgICAgICAgICAgICBub2RlLmdldEJvdW5kc0luU2NyZWVuKGJvdW5kcyk7CiAgICAgICAgICAgICAgICBpZiAoYm91bmRzLmJvdHRvbSA+IGJvdHRvbSkgewogICAgICAgICAgICAgICAgICAgIGJvdHRvbSA9IGJvdW5kcy5ib3R0b207CiAgICAgICAgICAgICAgICAgICAgbGFzdE5vZGUgPSBub2RlOwogICAgICAgICAgICAgICAgICAgIGlmICh0ZXh0LmVxdWFscyhXRUNIQVRfVklFV19PVEhFUlNfQ0gpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHNpZ25hdHVyZS5vdGhlcnMgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHNpZ25hdHVyZS5vdGhlcnMgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIGxhc3ROb2RlOwogICAgfQoKLy8gICAgQE92ZXJyaWRlCi8vICAgIHB1YmxpYyB2b2lkIG9uU2VydmljZUNvbm5lY3RlZCgpIHsKLy8gICAgICAgIHN1cGVyLm9uU2VydmljZUNvbm5lY3RlZCgpOwovLyAgICAgICAgdGhpcy53YXRjaEZsYWdzRnJvbVByZWZlcmVuY2UoKTsKLy8gICAgfQoKICAgIHByaXZhdGUgdm9pZCB3YXRjaEZsYWdzRnJvbVByZWZlcmVuY2UoKSB7CiAgICAgICAgc2hhcmVkUHJlZmVyZW5jZXMgPSBQcmVmZXJlbmNlTWFuYWdlci5nZXREZWZhdWx0U2hhcmVkUHJlZmVyZW5jZXModGhpcyk7CiAgICAgICAgc2hhcmVkUHJlZmVyZW5jZXMucmVnaXN0ZXJPblNoYXJlZFByZWZlcmVuY2VDaGFuZ2VMaXN0ZW5lcih0aGlzKTsKCiAgICAgICAgdGhpcy5wb3dlclV0aWwgPSBuZXcgUG93ZXJVdGlsKHRoaXMpOwogICAgICAgIEJvb2xlYW4gd2F0Y2hPbkxvY2tGbGFnID0gc2hhcmVkUHJlZmVyZW5jZXMuZ2V0Qm9vbGVhbigicHJlZl93YXRjaF9vbl9sb2NrIiwgZmFsc2UpOwogICAgICAgIHRoaXMucG93ZXJVdGlsLmhhbmRsZVdha2VMb2NrKHdhdGNoT25Mb2NrRmxhZyk7CiAgICB9CgogICAgQE92ZXJyaWRlCiAgICBwdWJsaWMgdm9pZCBvblNoYXJlZFByZWZlcmVuY2VDaGFuZ2VkKFNoYXJlZFByZWZlcmVuY2VzIHNoYXJlZFByZWZlcmVuY2VzLCBTdHJpbmcga2V5KSB7CiAgICAgICAgaWYgKGtleS5lcXVhbHMoInByZWZfd2F0Y2hfb25fbG9jayIpKSB7CiAgICAgICAgICAgIEJvb2xlYW4gY2hhbmdlZFZhbHVlID0gc2hhcmVkUHJlZmVyZW5jZXMuZ2V0Qm9vbGVhbihrZXksIGZhbHNlKTsKICAgICAgICAgICAgdGhpcy5wb3dlclV0aWwuaGFuZGxlV2FrZUxvY2soY2hhbmdlZFZhbHVlKTsKICAgICAgICB9CiAgICB9CgogICAgQE92ZXJyaWRlCiAgICBwdWJsaWMgdm9pZCBvbkRlc3Ryb3koKSB7CiAgICAgICAgdGhpcy5wb3dlclV0aWwuaGFuZGxlV2FrZUxvY2soZmFsc2UpOwogICAgICAgIHN1cGVyLm9uRGVzdHJveSgpOwogICAgfQoKICAgIHByaXZhdGUgU3RyaW5nIGdlbmVyYXRlQ29tbWVudFN0cmluZygpIHsKICAgICAgICBpZiAoIXNpZ25hdHVyZS5vdGhlcnMpIHJldHVybiBudWxsOwoKICAgICAgICBCb29sZWFuIG5lZWRDb21tZW50ID0gc2hhcmVkUHJlZmVyZW5jZXMuZ2V0Qm9vbGVhbigicHJlZl9jb21tZW50X3N3aXRjaCIsIGZhbHNlKTsKICAgICAgICBpZiAoIW5lZWRDb21tZW50KSByZXR1cm4gbnVsbDsKCiAgICAgICAgU3RyaW5nW10gd29yZHNBcnJheSA9IHNoYXJlZFByZWZlcmVuY2VzLmdldFN0cmluZygicHJlZl9jb21tZW50X3dvcmRzIiwgIiIpLnNwbGl0KCIgKyIpOwogICAgICAgIGlmICh3b3Jkc0FycmF5Lmxlbmd0aCA9PSAwKSByZXR1cm4gbnVsbDsKCiAgICAgICAgQm9vbGVhbiBhdFNlbmRlciA9IHNoYXJlZFByZWZlcmVuY2VzLmdldEJvb2xlYW4oInByZWZfY29tbWVudF9hdCIsIGZhbHNlKTsKICAgICAgICBpZiAoYXRTZW5kZXIpIHsKICAgICAgICAgICAgcmV0dXJuICJAIiArIHNpZ25hdHVyZS5zZW5kZXIgKyAiICIgKyB3b3Jkc0FycmF5WyhpbnQpIChNYXRoLnJhbmRvbSgpICogd29yZHNBcnJheS5sZW5ndGgpXTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXR1cm4gd29yZHNBcnJheVsoaW50KSAoTWF0aC5yYW5kb20oKSAqIHdvcmRzQXJyYXkubGVuZ3RoKV07CiAgICAgICAgfQogICAgfQp9Cg==</text>
      </register>
      <register name="9" type="4">
        <text encoding="base64">aW1wbGVtZW50cyBBY2Nlc3NpYmlsaXR5TWFuYWdlci5BY2Nlc3NpYmlsaXR5U3RhdGVDaGFuZ2VMaXN0ZW5lciA=</text>
      </register>
      <register name=":" type="4">
        <text>q</text>
      </register>
    </registers>
    <search>
      <last-dir>0</last-dir>
      <show-last>false</show-last>
    </search>
    <history>
      <history-search />
      <history-cmd>
        <entry>q</entry>
      </history-cmd>
      <history-expr />
      <history-input />
    </history>
    <shortcut-conflicts>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed O</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed D</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed I</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed U</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed R</text>
      </shortcut-conflict>
    </shortcut-conflicts>
  </component>
</application>